{% extends 'base.html' %}

{% block content %}

<div class='row'>
	<div class='col-lg-6 col-md-6 mx-auto'>
		{% include 'posts/snippets/card.html' with instance=object %}
	</div>

	<div class='col-lg-6 col-md-6 mx-auto'>
       		<div class='col-12'>
         		{{ object.user.profile }}
	                {% if object.user.profile.image %}<img class="d-block img-fluid" src="{{ object.user.profile.image.url }}" alt="#">{% endif %}

		</div>
	</div>
</div>

		<br/>
		{% include 'posts/snippets/map.html' with obj=object %}
	</div>
</div>

{% endblock %}
{% if request.user != object.owner %}
{% block extra_js %}
<script type='text/javascript'>
$(document).ready(function(){

			function getCookie(name) {
		var cookieValue = null;
    		if (document.cookie && document.cookie !== '') {
        		var cookies = document.cookie.split(';');
        		for (var i = 0; i < cookies.length; i++) {
                		var cookie = jQuery.trim(cookies[i]);
            			// Does this cookie string begin with the name we want?
        	    		if (cookie.substring(0, name.length + 1) === (name + '=')) {
	                		cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                			break;
            			}
        		}
    		}
    		return cookieValue;
	}

	var csrftoken = getCookie('csrftoken');

	function csrfSafeMethod(method) {
    		// these HTTP methods do not require CSRF protection
    		return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
	}
	$.ajaxSetup({
    		beforeSend: function(xhr, settings) {
        		if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            			xhr.setRequestHeader("X-CSRFToken", csrftoken);
        		}
    		}
	});




                        $('.mb').on('click', function(event){
				console.log($('.bid').val());
                                $.ajax({
                                        url : "{% url 'jobs:job_create' %}",
                                        type: 'POST',
                                        data: {bid: $('.bid').val(),
					       post_id: {{object.id}} },
                                });
                        });
        });
</script>

{% endblock %}

{% endif %}
